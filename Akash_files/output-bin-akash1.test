#test to check presence of output-bin-default and output-bin-supported in get-printer-attributes response (syntax and range)
{
	NAME "get-printer-attributes: Expect output-bin-default and output-bin-supported"
	
	OPERATION Get-Printer-Attributes
	
	GROUP operation-attributes-tag
	ATTR charset attributes-charset utf-8
	ATTR naturalLanguage attributes-natural-language en
	ATTR uri printer-uri $uri
	#ATTR keyword requested-attributes output-bin-default, output-bin-supported #here should i just say all because in ipp2.0.test it shows that  output-bin is one of the required set of attributes

	DISPLAY output-bin-default
	DISPLAY output-bin-supported

	STATUS successful-ok
	EXPECT output-bin-default OF-TYPE keyword|name IN-GROUP printer-attributes-tag COUNT 1
	EXPECT output-bin-supported OF-TYPE keyword|name IN-GROUP printer-attributes-tag  #did not use the with value predicate due to the presence of values with name attribute syntax
	
	# Job template attributes for specific tests...
	EXPECT output-bin-supported WITH-VALUE "face-down" DEFINE-MATCH OPTIONAL_FACEDOWN_OUTPUTBIN
	EXPECT output-bin-supported WITH-VALUE "face-up" DEFINE-MATCH OPTIONAL_FACEUP_OUTPUTBIN 

}

# Test Get-Job-Attributes operation
{
	NAME "RFC 8011 section 4.3.4: Get-Job-Attributes Operation"
	
	OPERATION Get-Job-Attributes
	
	GROUP operation-attributes-tag
	ATTR charset attributes-charset utf-8
	ATTR naturalLanguage attributes-natural-language en
	ATTR uri printer-uri $uri
	ATTR integer job-id $job-id
	ATTR name requesting-user-name $user

	DISPLAY output-bin

	STATUS successful-ok
	EXPECT job-id OF-TYPE integer IN-GROUP job-attributes-tag COUNT 1 WITH-VALUE >0
	EXPECT job-uri OF-TYPE uri IN-GROUP job-attributes-tag COUNT 1 WITH-VALUE "$IPP_URI_SCHEME"
	EXPECT ?output-bin OF-TYPE keyword|name IN-GROUP job-attributes-tag COUNT 1 # check what to write in WITH-VALUE and is it supposed to be must or maybe(?)
}

#printing tests on the supported output-bins
{
	SKIP-IF-DEFINED NOPRINT
	SKIP-IF-NOT-DEFINED OPTIONAL_FACEDOWN_OUTPUTBIN

	NAME "Print-Job with face-down output-bin"
	
	OPERATION Print-Job

	GROUP operation-attributes-tag
	ATTR charset attributes-charset utf-8
	ATTR naturalLanguage attributes-natural-language en
	ATTR uri printer-uri $uri
	ATTR name requesting-user-name $user
	ATTR boolean ipp-attribute-fidelity false
	ATTR mimeMediaType document-format $filetype
	
	GROUP job-attributes-tag
	ATTR keyword output-bin "face-down"
	
	FILE $filename

	STATUS successful-ok
	STATUS server-error-job-canceled
	STATUS server-error-busy REPEAT-MATCH REPEAT-LIMIT 30

	EXPECT job-uri OF-TYPE uri COUNT 1 IN-GROUP job-attributes-tag WITH-VALUE "$IPP_URI_SCHEME"
	EXPECT job-id OF-TYPE integer COUNT 1 IN-GROUP job-attributes-tag
	       WITH-VALUE >0
	EXPECT job-state OF-TYPE unknown|enum COUNT 1 IN-GROUP job-attributes-tag
	       WITH-VALUE 3,4,5,6,7,8,9
	EXPECT job-state-reasons OF-TYPE keyword IN-GROUP job-attributes-tag
	EXPECT ?job-state-message OF-TYPE text IN-GROUP job-attributes-tag
	EXPECT ?number-of-intervening-jobs OF-TYPE integer
	       IN-GROUP job-attributes-tag WITH-VALUE >-1
}
{
	SKIP-IF-DEFINED NOPRINT
	SKIP-IF-NOT-DEFINED OPTIONAL_FACEUP_OUTPUTBIN

	NAME "Print-Job with face-down output-bin"
	
	OPERATION Print-Job

	GROUP operation-attributes-tag
	ATTR charset attributes-charset utf-8
	ATTR naturalLanguage attributes-natural-language en
	ATTR uri printer-uri $uri
	ATTR name requesting-user-name $user
	ATTR boolean ipp-attribute-fidelity false
	ATTR mimeMediaType document-format $filetype
	
	GROUP job-attributes-tag
	ATTR keyword output-bin "face-up"
	
	FILE $filename

	STATUS successful-ok
	STATUS server-error-job-canceled
	STATUS server-error-busy REPEAT-MATCH REPEAT-LIMIT 30

	EXPECT job-uri OF-TYPE uri COUNT 1 IN-GROUP job-attributes-tag WITH-VALUE "$IPP_URI_SCHEME"
	EXPECT job-id OF-TYPE integer COUNT 1 IN-GROUP job-attributes-tag
	       WITH-VALUE >0
	EXPECT job-state OF-TYPE unknown|enum COUNT 1 IN-GROUP job-attributes-tag
	       WITH-VALUE 3,4,5,6,7,8,9
	EXPECT job-state-reasons OF-TYPE keyword IN-GROUP job-attributes-tag
	EXPECT ?job-state-message OF-TYPE text IN-GROUP job-attributes-tag
	EXPECT ?number-of-intervening-jobs OF-TYPE integer
	       IN-GROUP job-attributes-tag WITH-VALUE >-1
}